<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.uptang.cloud.score.repository.ReviewRepository">

    <resultMap id="ResultMap" type="com.uptang.cloud.score.common.model.Review">
        <id property="id" column="id"/>
        <result property="scoreId" column="score_id"/>
        <result property="type" column="type" typeHandler="com.uptang.cloud.score.handler.ScoreTypeEnumTypeHandler"/>
        <result property="showStat" column="show_stat" typeHandler="com.uptang.cloud.score.handler.ShowStatEnumTypeHandler"/>
        <result property="objection" column="objection" typeHandler="com.uptang.cloud.score.handler.ObjectionEnumTypeHandler"/>
        <result property="objectionDesc" column="objection_desc"/>
        <result property="archive" column="archive"/>
        <result property="createdTime" column="created_time"/>
        <result property="updatedTime" column="updated_time"/>
    </resultMap>


    <!--字段名 Java属性名-->
    <sql id="mappings">
        `id` AS `id`, `score_id` AS `scoreId`, `type` AS `type`,
        `show_stat` AS `showStat`, `objection` AS `objection`,
        `objection_desc` AS `objectionDesc`, `archive` AS `archive`,
        `created_time` AS `createdTime`, `updated_time` AS `updatedTime`
    </sql>

    <!--字段名 Java属性名-->
    <sql id="columns">
        `id`, `score_id` , `type`, `show_stat`, `objection`, `objection_desc`, `archive`, `created_time`, `updated_time`
    </sql>

    <select id="queryByProperty" parameterType="com.uptang.cloud.score.common.model.Review" resultMap="ResultMap">
        SELECT <include refid="columns"/> FROM review
        <where>
            <trim suffixOverrides="AND" prefixOverrides="AND">
                <if test="id != null">AND `id`=#{id}</if>
                <if test="scoreId != null">AND `score_id`=#{scoreId}</if>
                <if test="type != null">AND `type`=#{type}</if>
                <if test="showStat != null">AND `show_stat`=#{showStat}</if>
                <if test="objection != null">AND `objection`=#{objection}</if>
                <if test="objectionDesc != null and objectionDesc != ''">AND `objection_desc`=#{objectionDesc}</if>
                <if test="archive != null">AND `archive`=#{archive}</if>
                <if test="createdTime != null">AND `created_time`=#{createdTime}</if>
                <if test="updatedTime != null">AND `updated_time`=#{updatedTime}</if>
            </trim>
        </where>
    </select>

    <!--查询公示数据-->
    <select id="queryShowDate" parameterType="com.uptang.cloud.score.common.model.Review" resultMap="ResultMap">
        SELECT <include refid="columns"/> FROM review WHERE show_stat=1
        <trim suffixOverrides="AND" prefixOverrides="AND">
            <if test="id != null">AND `id`=#{id}</if>
            <if test="scoreId != null">AND `score_id`=#{scoreId}</if>
            <if test="type != null">AND `type`=#{type}</if>
            <if test="objection != null">AND `objection`=#{objection}</if>
            <if test="objectionDesc != null and objectionDesc != ''">AND `objection_desc`=#{objectionDesc}</if>
            <if test="archive != null">AND `archive`=#{archive}</if>
            <if test="createdTime != null">AND `created_time`=#{createdTime}</if>
            <if test="updatedTime != null">AND `updated_time`=#{updatedTime}</if>
        </trim>
    </select>
</mapper>